(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{372:function(t,s,e){"use strict";e.r(s);var r=e(14),a=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"husky自动代码格式化和自动代码检查"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#husky自动代码格式化和自动代码检查"}},[t._v("#")]),t._v(" husky自动代码格式化和自动代码检查")]),t._v(" "),s("h2",{attrs:{id:"安装过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装过程"}},[t._v("#")]),t._v(" 安装过程")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Git + Husky + Lint-staged + Prettier + Eslint")])]),t._v(" "),s("li",[s("p",[t._v("基本思路：\na. 利用Husky进行git操作的监听钩子"),s("br"),t._v("\nb. 利用Prettier进行代码格式化"),s("br"),t._v("\nc. 利用Eslint对不规范代码进行修复"),s("br"),t._v("\nd. Eslint修复不了的，给出git提示")])]),t._v(" "),s("li",[s("p",[t._v("相关配置文件\na. .prettierrc 官链：https://prettier.io/docs/en/options.html"),s("br"),t._v("\nb. .eslintrc 配置ruls规则 中文官链：https://zh-hans.eslint.org/")])]),t._v(" "),s("li",[s("p",[t._v("工作模式")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("当我们进行一次git提交时")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n触发husky配置的pre"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("commit钩子")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n执行npm run lint"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("staged命令")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n触发lint"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("staged对暂存区的文件进行格式化（使用"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json中配置的lint"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("staged任务）")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n使用eslint 进行格式化\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[s("p",[t._v("结论：\na. Prettier只是对代码进行格式化的，不对代码质量进行检测，支持各种语言"),s("br"),t._v("\nb. Eslint既可以对代码进行格式化，也可以对代码质量进行检测，但是仅支持Javascript")]),t._v(" "),s("p",[t._v("c. .editorconfig针对代码格式进行规范 官链：https://editorconfig.org/")]),t._v(" "),s("p",[t._v('d. React@17之后，因为React有了react/jsx-runtime，会自动解析jsx，所以不需要再手动引入React了；在.eslintrc文件里面的extends里面加上"plugin:react/  jsx-runtime"，就不会引起Eslint的报错了。')])])]),t._v(" "),s("p",[t._v("疑问：")]),t._v(" "),s("ol",[s("li",[t._v("VsCode的setting和代码文件里面的Prettier\\Eslint的优先级\n结论：规则先合并，遇到冲突按如下优先级进行执行，.prettier > .editorconfig > vscode setting")]),t._v(" "),s("li",[t._v("有哪些成熟的eslint配置方案呢？")])]),t._v(" "),s("p",[t._v("参链：\nhttps://juejin.cn/post/7156893291726782500\nhttps://juejin.cn/post/7085534305249656862 husky 高版本之后")]),t._v(" "),s("h2",{attrs:{id:"心得体会"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#心得体会"}},[t._v("#")]),t._v(" 心得体会")]),t._v(" "),s("ol",[s("li",[t._v("不同版本的lint-staged需要不同版本的Node，高版本的依赖需要高版本的Node主持，高版本的Node需要高版本的硬件支持。")])])])}),[],!1,null,null,null);s.default=a.exports}}]);